(self.modernJsonp=self.modernJsonp||[]).push([["58430"],{446885:function(e,t,r){r.d(t,{Z:()=>h});var n=r(686659),i=r(667294),o=r(399353),a=r(759271),s=r(351736),d=r(609252),l=r(178315),c=r(774838),u=r(40763),p=r(785893);function h({children:e,footerConfig:t,headerConfig:r,height:h,hideOnScroll:f,hideOnScrollState:{isHidden:m,updateHiddenState:x},isFooterHidden:_,noPadding:v,paddingX:g,paddingY:b=l.og,type:y,zIndex:w,isStoryPin:S}){let j,P;(0,i.useEffect)(()=>{(0,n.Z)("FixedContent","/app/packages/layout/FixedContent.tsx")},[]);let{headerLimitedOverflow:I,ignoreObstructions:Z,zIndexForGestaltBug:k}=r||{},{appUpsellFooterConfig:E,footerInLego:T,navFooterConfig:C}=t||{},H=!!E,A="header"===y?"top":"bottom",O=(0,s.vs)(),{isRTL:D}=(0,c.B)(),{mWebCloseupRedesignEnabled:L}=(0,a.Z)(),R=(0,i.useRef)(null),z=(0,i.useRef)(null);(0,i.useEffect)(()=>{try{if(!Z){let e=R.current;z.current=I&&e&&Array.isArray(e.children)?e.children[0]:e,z.current instanceof HTMLElement&&d.Z.addObstruction(A,z.current)}}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}return()=>{!Z&&z.current instanceof HTMLElement&&d.Z.removeObstruction(A,z.current)}},[Z,I,A,O]);let B="top"===A?"relative":"fixed",U=v?0:b,F=(h??l.R$)+(r?.overrideTop||0),M=f||C?{transition:T||L?"transform 300ms ease-in-out, opacity 300ms ease-in-out":"transform 200ms linear",...m||_?{transform:`translateY(${"top"===A?-F:F}px)`,opacity:T||L?0:1}:Object.freeze({})}:{},N=2*!("relative"!==B||r?.noGutter),W=N?-N:0,J=O?s.k7:"rgba(255,255,255,.95)";O&&("header"===y?j=-1:P=-1);let V=T?H?void 0:h??l.R$:"100%",Y=T?l.KJ:void 0,K=r?.isTranslucent&&J||O?J:"var(--sema-color-background-default)",q=r?.isTransparentBackground&&1?"var(--sema-color-background-transparent)":K,$=(0,i.useMemo)(()=>({height:"footer"===y&&L?`calc(${V} + env(safe-area-inset-bottom))`:V,...L&&"footer"===y?{paddingBottom:`calc(env(safe-area-inset-bottom) + ${4*(U||0)}px)`}:Object.freeze({})}),[L,V,y,U]),Q=(0,u.Z)({skipExpActivation:!0});return(0,p.jsx)(o.xu,{ref:R,bottom:"footer"===y,dangerouslySetInlineStyle:{__style:{top:j,bottomStyle:P,...!w||k?{zIndex:k||1}:Object.freeze({}),...I?{background:"transparent",overflow:"hidden",paddingBottom:l.UB,marginBottom:-l.UB,pointerEvents:"none"}:Object.freeze({}),...r?.hasBorder?{borderBottom:l.dS}:Object.freeze({}),...t?.hasTopShadow?{boxShadow:"0 -2px 4px 1px rgba(0, 0, 0, 0.08)"}:Object.freeze({}),...M}},"data-test-id":y,display:H?"flex":void 0,height:h&&!T?h:void 0,left:!0,marginEnd:T?"auto":W,marginStart:T?"auto":W,onTransitionEnd:()=>{(f||C)&&z.current&&(m||_?d.Z.removeObstruction(A,z.current):d.Z.addObstruction(A,z.current))},position:B,right:!0,top:"header"===y,width:T||"fixed"!==B?void 0:"100%",zIndex:k?void 0:w,children:(0,p.jsx)(o.xu,{alignItems:t?.alignCenter?"center":void 0,dangerouslySetInlineStyle:{__style:{backgroundColor:q,paddingLeft:D||!Q||S?void 0:"8px",paddingRight:D&&Q&&!S?"8px":void 0,...$,boxShadow:L&&"footer"===y?`0 10px 0 0 ${q}, ${l.KJ}`:Y,marginBottom:T&&!C?.docked?16:void 0,...I?{pointerEvents:"auto"}:Object.freeze({}),...r?.useRoundedCorners?{zIndex:5,borderTopRightRadius:17,borderTopLeftRadius:17,borderBottomRightRadius:0,borderBottomLeftRadius:0}:Object.freeze({})}},display:T||t?.alignCenter?"flex":void 0,marginEnd:T?"auto":void 0,marginStart:T?"auto":void 0,paddingX:g||4*("footer"===y&&!v)+N,paddingY:U,position:"relative",rounding:T&&!C?.docked?"pill":void 0,width:C?C.footerWidth:H?void 0:"100%",children:"function"==typeof e?e({updateHiddenState:x}):e})})}},271202:function(e,t,r){r.r(t),r.d(t,{default:()=>c});var n=r(686659),i=r(667294),o=r(399353),a=r(178315),s=r(446885),d=r(763904),l=r(785893);function c({hasBorder:e,headerLimitedOverflow:t,ignoreObstructions:r,isTranslucent:c,isTransparentBackground:u,noGutter:p,overrideTop:h,useRoundedCorners:f,zIndexForGestaltBug:m,isStoryPin:x,..._}){(0,i.useEffect)(()=>{(0,n.Z)("FixedHeader","/app/packages/layout/FixedHeader.tsx")},[]);let{noPadding:v,paddingY:g=a.og,zIndex:b}=_;return(0,l.jsx)(o.Le,{height:t?a.LV+2*(v?0:g)*4:void 0,top:h||0,zIndex:b||void 0,children:(0,l.jsx)(d.Z,{hideOnScroll:_.hideOnScroll,children:n=>(0,l.jsx)(s.Z,{..._,headerConfig:{isTranslucent:c,isTransparentBackground:u,headerLimitedOverflow:t,hasBorder:e,ignoreObstructions:r,noGutter:p,overrideTop:h,zIndexForGestaltBug:m,useRoundedCorners:f},hideOnScrollState:n,isStoryPin:x,type:"header"})})})}},763904:function(e,t,r){r.d(t,{Z:()=>a});var n=r(667294),i=r(730448);function o(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends n.Component{constructor(...e){super(...e),o(this,"state",{isHidden:!!this.props.appUpsellFooterConfig||!!this.props.navFooterConfig?.isDockedNavOnPlp}),o(this,"lastScrollPos",0),o(this,"updateHiddenState",e=>{this.reqAnimationId=window.requestAnimationFrame(()=>{this.setState({isHidden:e})})}),o(this,"handleScroll",(0,i.Z)(()=>{let{appUpsellFooterConfig:e,navFooterConfig:t}=this.props,{isHidden:r}=this.state,n=window.scrollY,i=n-this.lastScrollPos,o="none",{scrollHeight:a,clientHeight:s}=document.documentElement||{};Number.isNaN(a)||Number.isNaN(s)||(o=i<0?n<=Math.abs((window.scrollMinY||0)+Math.max(i,20))?"start":"none":n>=(window.scrollMaxY||a-s)-Math.max(i,20)?"end":"none");let d=55*!t?.isModal;e?i>20&&r&&n>=500?e.shouldShowAfterScroll()&&(this.updateHiddenState(!1),t?.onScroll(!1)):(i<-20&&!r||n<=d)&&(this.updateHiddenState(!0),t?.onScroll(!0)):this.props.navFooterConfig?.isDockedNavOnPlp?"start"===o&&!r||n<=d?(this.updateHiddenState(!0),t?.onScroll(!0)):(n>d||"end"===o)&&r&&(this.updateHiddenState(!1),t?.onScroll(!1)):(i<-20||"start"===o)&&r||n<=d?(this.updateHiddenState(!1),t?.onScroll(!1)):(i>20||"end"===o)&&!r&&(this.updateHiddenState(!0),t?.onScroll(!0)),this.lastScrollPos=n},30))}componentDidMount(){try{(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.addEventListener("scroll",this.handleScroll)}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}}componentWillUnmount(){(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.removeEventListener("scroll",this.handleScroll),this.reqAnimationId&&(window.cancelAnimationFrame(this.reqAnimationId),this.reqAnimationId=null)}componentDidUpdate(e){!e.hideOnScroll&&this.props.hideOnScroll||!e.navFooterConfig?.isDockedNavOnPlp&&this.props.navFooterConfig?.isDockedNavOnPlp?(this.updateHiddenState(!0),window.addEventListener("scroll",this.handleScroll)):(e.hideOnScroll&&!this.props.hideOnScroll||e.navFooterConfig?.isDockedNavOnPlp&&!this.props.navFooterConfig?.isDockedNavOnPlp)&&(this.updateHiddenState(!1),window.removeEventListener("scroll",this.handleScroll))}render(){let{children:e,navFooterConfig:t}=this.props,{isHidden:r}=this.state;return e({isHidden:!t?.forceShow&&r,updateHiddenState:this.updateHiddenState})}}},619481:function(e,t,r){r.d(t,{Z:()=>c});var n=r(667294),i=r(581722),o=r(442279),a=r(501010),s=r(629972),d=r(487038);let l=(e,t,r)=>e.resources[t]?.[r];function c(e){let{name:t,optionsKey:r}=e,c=t===s.fY,u=(0,d.MA)(),p=u?.get(t,r);if(p)throw p;let h=(0,o.createSelector)(e=>l(e,t,r),e=>e?.data),f=(0,o.createSelector)(e=>l(e,t,r),e=>e?.auxData),m=(0,o.createSelector)(e=>l(e,t,r),e=>e?.error),x=(0,o.createSelector)(e=>l(e,t,r),e=>e?.nextBookmark),_=e=>e[t]?.[r],v=(0,a.Z)().checkExperiment("www_resources_reselect").anyEnabled,g=(0,i.v9)(v?x:({resources:e})=>_(e)?.nextBookmark),b=(0,i.v9)(v?h:({resources:e})=>_(e)?.data),y=(0,i.v9)(v?f:({resources:e})=>_(e)?.auxData),w=(0,i.v9)(v?m:({resources:e})=>_(e)?.error),S=(0,n.useRef)({auxData:void 0,data:void 0,error:void 0,isAtEnd:!1,nextBookmark:void 0});if(c)return S.current;let j={auxData:y,data:b,error:w,isAtEnd:g===s.qx,nextBookmark:g};return(j.auxData!==S.current.auxData||j.data!==S.current.data||j.error!==S.current.error||j.isAtEnd!==S.current.isAtEnd||j.nextBookmark!==S.current.nextBookmark)&&(S.current=j),S.current}},838350:function(e,t,r){r.d(t,{Z:()=>n});function n({top:e,right:t,bottom:r,left:n,windowHeight:i,windowWidth:o,threshold:a=0}){return e>=0+a&&n>=0+a&&r<=i-a&&t<=o-a}},398690:function(e,t,r){r.d(t,{Z:()=>eT});var n=r(686659),i=r(667294),o=r(581722),a=r(312048),s=r(399353),d=r(4533),l=r(11442),c=r(470205),u=r(290216),p=r(714518),h=r(81342),f=r(664300),m=r(924591),x=r(935059),_=r(24246),v=r(271202),g=r(134136),b=r(325705),y=r(501010),w=r(774838),S=r(661376),j=r(825605),P=r(653247),I=r(34550),Z=r(112658),k=r(577356),E=r(341687),T=r(739405),C=r(603284),H=r(2061),A=r(610142),O=r(31425),D=r(919203),L=r(726425),R=r(28031),z=r(104999),B=r(730448),U=r(893957),F=r(838350),M=r(454908),N=r(785893);let W={__style:{textOverflow:"ellipsis",whiteSpace:"nowrap"}};function J({currentTabIndex:e,tabBoards:t}){(0,i.useEffect)(()=>{(0,n.Z)("MoreIdeasTabs","/app/www/Homefeed/MoreIdeasTabs.tsx")},[]);let r=(0,i.useRef)(null),d=(0,i.useRef)(!1),{width:l,height:c}=(0,R.Z)()||{width:0,height:0},u=(0,i.useRef)([]),p=(0,a.s0)(),h=(0,_.Z)(),f=(0,z.Z)(),m=(0,o.I0)(),x=t.length?[{href:"/",text:(0,N.jsx)(s.xu,{children:h._('All', 'homefeed.moreIdeasTab.homefeedTab', 'Homefeed tab')}),tabType:1},...t.filter(e=>e).map(({id:e,name:t},r)=>({href:`/?boardId=${String(e)}`,text:(0,N.jsx)(s.xu,{dangerouslySetInlineStyle:W,maxWidth:100,overflow:"hidden",children:t}),boardId:e,tabType:2,ref:u.current[r]}))]:null,v=e=>1===e?11081:11082,g=(0,i.useRef)([]),b=(0,i.useCallback)(()=>{u&&u.current&&u.current.length&&u.current.forEach((e,r)=>{if(!e?.current)return;let{id:n,name:i}=t[r]||{},o=e.current.getBoundingClientRect();(0,F.Z)({left:o.left,right:o.right,top:o.top,bottom:o.bottom,windowHeight:c,windowWidth:l})&&n&&!g.current.includes(n)&&(f({event_type:13,view_type:1,view_parameter:92,component:13184,element:v(2),object_id_str:n,aux_data:{board_id:n,tab_title:i,referrer:19}}),g.current.push(n))})},[u,f,t,c,l]),y=(0,B.Z)(()=>{b()},50);if((0,U.Z)(()=>{u.current=Array(t.length).fill(void 0).map((e,t)=>u.current[t]||(0,i.createRef)())}),(0,i.useEffect)(()=>{b();let e=r.current;return e&&e.addEventListener("scroll",y),()=>{e?.removeEventListener("scroll",y)}},[b,y]),(0,i.useEffect)(()=>()=>{d.current&&(window.cancelAnimationFrame(d.current),d.current=null)}),!x)return null;let w=x.map(e=>({href:e.href,text:e.text,ref:e.ref}));return(0,N.jsx)(s.xu,{ref:r,"data-test-id":"more-ideas-tabs",fit:!0,marginBottom:1,marginTop:1,overflow:"scrollX",children:(0,N.jsx)(s.mQ,{activeTabIndex:e,onChange:({activeTabIndex:e})=>{let t=x?.[e];if(t){let r;r=t.boardId,m((0,M.r)(r,e)),f({event_type:101,view_type:1,view_parameter:92,component:13184,element:v(t.tabType),aux_data:{index:e.toString(),board_id:t.boardId,referrer:19},object_id_str:t.boardId})}let{pathname:r,state:n}=x?{pathname:(x[e]||x[0]).href,state:(x[e]||x[0]).locationState||void 0}:{};p(r,{state:n})},tabs:w})})}var V=r(966039),Y=r(99672),K=r(179664),q=r(394382),$=r(751534);function Q(){(0,i.useEffect)(()=>{(0,n.Z)("PreferencesUpdatedBanner","/app/www/pages/duplo/PreferencesUpdatedBanner.tsx")},[]);let{shouldRefreshHomefeed:e,clearRefreshFlag:t}=(0,q._T)(),{showToast:r}=(0,k.dI)(),o=(0,_.Z)(),a=(0,i.useRef)(!1);return(0,i.useEffect)(()=>{if(e&&!a.current){a.current=!0;let e=o._('Preferences updated! We\'re refreshing your feed now.', 'PreferencesUpdatedBanner.message', 'Message shown when user returns to homefeed after updating preferences');r(({hideToast:r})=>(0,N.jsx)(m.Z,{duration:3e3,onHide:()=>{r(),t(),a.current=!1},text:e}))}else e||(a.current=!1)},[e,t,r,o]),null}var G=r(228612),X=r(297621),ee=r(767415),et=r(9065),er=r(520803);function en(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let ei=(0,et.Z)(()=>r.e("41881").then(r.bind(r,701426)),void 0,e=>701426,"app-www-pages-duplo-CoreActionsHeader",e=>["41881"]),eo=(0,et.Z)(()=>r.e("82408").then(r.bind(r,221930)),void 0,e=>221930,"app-www-stories-FullWidthPinStory",e=>["82408"]),ea=(0,et.Z)(()=>r.e("85946").then(r.bind(r,568737)),{ssr:!1},e=>568737,void 0,void 0),es=(0,et.Z)(()=>r.e("93065").then(r.bind(r,878723)),void 0,e=>878723,"app-www-Homefeed-HomefeedMoreIdeasTabContent",e=>["93065"]),ed=(0,et.Z)(()=>r.e("61436").then(r.bind(r,448599)),void 0,e=>448599,"app-www-stories-LandingPageStory-LandingPageStory",e=>["61436"]),el=(0,et.Z)(()=>Promise.all([r.e("91062"),r.e("10192"),r.e("60417")]).then(r.bind(r,321792)),{ssr:!1},e=>321792,void 0,void 0),ec=(0,et.Z)(()=>r.e("77153").then(r.bind(r,179007)),{ssr:!1},e=>179007,void 0,void 0),eu=(0,et.Z)(()=>r.e("48205").then(r.bind(r,538049)),{ssr:!1},e=>538049,void 0,void 0),ep=(0,et.Z)(()=>Promise.all([r.e("25418"),r.e("36157")]).then(r.bind(r,219875)),{ssr:!1},e=>219875,void 0,void 0),eh=(0,i.lazy)(()=>r.e("79581").then(r.bind(r,6215))),ef=(0,i.lazy)(()=>r.e("87463").then(r.bind(r,223865))),em=(0,i.lazy)(()=>r.e("18577").then(r.bind(r,646587))),ex=(0,i.lazy)(()=>r.e("79021").then(r.bind(r,504636))),e_=(0,i.lazy)(()=>r.e("77846").then(r.bind(r,5480))),ev=(0,i.lazy)(()=>r.e("63585").then(r.bind(r,272319))),eg={feedKey:$.xJ,trafficSource:$.WV,resourceName:$.om,feedItemProps:e=>({viewParameter:92,viewType:1,onFeedItemClick:()=>{e.onFeedItemClick&&e.onFeedItemClick()}}),pullToRefresh:!0},eb={first_page_size:"25",page_size:"10"},ey=({webMobileHomeFeedTakoverExperience:e})=>{let{feedKey:t,feedItemProps:r,pullToRefresh:n}=eg,i=(0,a.TH)(),l=(0,a.s0)(),c=(0,er.Z)(),u=(0,o.v9)(({session:e})=>e.firstHomeFeedRequestAfterNux),p={webMobileHomeFeedTakoverExperience:e,location:i,navigate:l,match:c},h=(0,o.v9)(({feeds:e})=>e[t]??[]),{selectedUseCases:f,selectedPins:m}=(0,K.u)(),x=(0,V.rQ)(f,m),_=!u,v=x.length>0?{in_nux:u,nux_signals_map:x}:{in_nux:u},g={...$.HH,..._?{...eb}:{...v},in_local_navigation:!0,static_feed:!!(i&&(i.pathname.includes("pwt_performance_testing")||void 0!==(0,E.Z)(i.search).pwt_performance_testing))},b=(0,S.Z)({name:$.om,options:g}),{isAtEnd:y,isFetching:j,fetchMore:P,data:Z,refresh:k}=b,T={includeBackgroundImages:!0,includeVideos:!0,pins:Object.values((0,G.JC)())};u&&(0,ee.nP)("home_product.homefeed.has_in_nux_flag",{sampleRate:.1,tags:{appType:"mweb"}});let C=(()=>{let{isGraphQLEnabledInGeneral:e}=(0,H.nF)(),{locale:t}=(0,w.B)(),r=(0,G.JC)();return({feedItems:n,prevFeedItems:i,finishedRefresh:o,unauthLandingPinStateForAuthHomefeed:{pinId:a,feedItem:s}})=>{if(!n.length)return null;if(o&&i.length>0){let e=(e,t)=>e.slice(0,t).map(e=>e.id),r=e(i,5),o=e(n,5),a={appType:"mweb",language:t&&t.slice(0,2)||"unknown",locale:t||"unknown"};(0,ee.nP)("home_product.homefeed.refresh",{sampleRate:1,tags:a}),JSON.stringify(r)===JSON.stringify(o)&&(0,ee.nP)("home_product.homefeed.refresh.no_change",{sampleRate:1,tags:a})}if(a&&!e){if(i.length>0&&i[0]!==n[0])return(0,I.M0)().removeItem(d.uc),{feedItem:null,pinId:null};else if((0===i.length||i[0]===n[0]&&i.length!==n.length||!s)&&r[a]&&!n.slice(0,5).some(({id:e})=>e===a))return{feedItem:{id:a,type:"pin",trackingParams:n[0].trackingParams},pinId:a}}return null}})(),O=Z?.length?Z[0]:null;if(e&&e.display_data?.in_checklist_education&&e.display_data?.num_columns_requested===2){let e={type:"fullWidthBreakIn",value:{index:0,content:O?.id&&(0,N.jsx)(X.Z,{storyId:O.id,children:e=>(0,N.jsx)(eo,{slotIndex:0,story:e,viewParameter:3833,viewType:604})})}},i=h.slice(1);return(0,N.jsx)(s.xu,{"data-test-id":"homefeed",children:(0,N.jsx)(A.Zt,{authHomefeedComponentDidUpdate:C,feedItemProps:r&&r(p),feedItems:i,feedItemsAdjustment:e,feedKey:t,pagination:{hasNext:!y,isLoadingNext:j,loadNext:()=>P(),refetch:()=>k()},pullToRefresh:n,trafficSource:$.WV,visuallyCompleteProfilerOptions:T})})}return _&&!e?.display_data?(0,N.jsx)(s.xu,{"data-test-id":"homefeed-ssr",children:(0,N.jsx)(A.iK,{authHomefeedComponentDidUpdate:C,feedItemProps:r&&r(p),feedKey:$.xJ,pullToRefresh:n,resource:b,serverRender:!0,trafficSource:$.WV,visuallyCompleteProfilerOptions:T})}):(0,N.jsx)(s.xu,{"data-test-id":"homefeed",children:(0,N.jsx)(A.iK,{authHomefeedComponentDidUpdate:C,feedItemProps:r&&r(p),feedKey:t,pullToRefresh:n,resource:b,trafficSource:$.WV,visuallyCompleteProfilerOptions:T})})},ew=(0,et.Z)(()=>r.e("35273").then(r.bind(r,61949)),{ssr:!1},e=>61949,void 0,void 0),eS=(0,et.Z)(()=>r.e("43946").then(r.bind(r,846333)),{ssr:!1},e=>846333,void 0,void 0),ej=(0,et.Z)(()=>r.e("82848").then(r.bind(r,809793)),{ssr:!1},e=>809793,void 0,void 0),eP=(0,et.Z)(()=>r.e("37213").then(r.bind(r,799997)),{ssr:!1},e=>799997,void 0,void 0),eI=(0,et.Z)(()=>r.e("18012").then(r.bind(r,25711)),{ssr:!1},e=>25711,void 0,void 0),eZ=(0,et.Z)(()=>r.e("3765").then(r.bind(r,502851)),{ssr:!1},e=>502851,void 0,void 0);class ek extends i.PureComponent{constructor(...e){super(...e),en(this,"state",{...(0,V.HW)(),currentTabIndex:"number"==typeof this.props.selectedTabIndex?this.props.selectedTabIndex:L.e,showUnlinkTokenExpiredModal:!1,showDeleteAccountSurveyModal:!1,showYipModal:!1,shouldDismissCoreActionsHeader:!1,showQRAppErrorBanner:!1}),en(this,"renderOptInInterestPicker",()=>{let{everythingFeedExperience:e,isLimitedLogin:t}=this.props,{extraPlpImages:r,extraBlpImages:n}=this.state,i=!t&&e&&504192===e.experience_id,o=i&&e&&e.display_data&&e.display_data.full_screen_modal;return e&&i?(0,N.jsx)(c.Z,{name:"SafeSuspense_HomePage_OptInInterestPicker",children:o?(0,N.jsx)(eZ,{experience:e,extraImageInfo:r.length>0?r:n,viewParameter:92,viewType:1}):(0,N.jsx)(eP,{experience:e,viewParameter:92,viewType:1})}):null})}static getDerivedStateFromProps(e){let{selectedTabIndex:t,navigate:r,location:n}=e;return(0,E.Z)(n.search).show_qr_app_error?(r("/",{replace:!0}),{showQRAppErrorBanner:!0}):"number"==typeof t?{currentTabIndex:t}:null}componentDidMount(){let{dispatchViewedSharedPins:e,location:t,i18n:r,showToast:n,navigate:i}=this.props,{sharedPinData:o}=this.state;(0,Y.E)(!1),(0,l.Z)(),o&&Object.keys(o).length>0&&e(o),t.state?.unlinkTokenInvalid&&this.setState({showUnlinkTokenExpiredModal:!0}),t.state?.isCloseAccountReasonOpen&&this.setState({showDeleteAccountSurveyModal:!0}),t.state?.showError&&n(({hideToast:e})=>(0,N.jsx)(m.Z,{duration:5e3,onHide:e,text:r._('We can\u2019t find that idea! Try searching for one just like it.', ' - ', ' -- '),type:"error"})),(0,E.Z)(t.search).show_yip_modal&&(i("/",{replace:!0}),this.setState({showYipModal:!0})),this.props.shouldRefreshHomefeed&&(0,O.cV)("homefeed")}render(){let{checkExperiment:e,currentUserId:t,currentUsername:r,everythingFeedExperience:n,navigate:o,i18n:a,isAuthenticated:d,isEligibleForCoreActionsHeader:l,isPartner:m,location:x,moreIdeasStory:_,newUserWelcomeStoryExperience:b,webMobileHomeFeedTakoverExperience:y,selectedTabBoardId:w,tabBoards:S,shouldRefreshHomefeed:I}=this.props,{currentTabIndex:k,showUnlinkTokenExpiredModal:T,showDeleteAccountSurveyModal:H,showYipModal:A,shouldDismissCoreActionsHeader:O,showQRAppErrorBanner:R}=this.state,z=(0,E.Z)(x.search),B=z&&z.boardId||w;if(n&&!R)switch(n.experience_id){case 40002:case 10105:return(0,N.jsx)(c.Z,{name:"SafeSuspense_HomePage_Nux",children:(0,N.jsx)(j.Z,{fallback:(0,N.jsx)(P.Z,{accessibilityLabel:this.props.i18n._('Loading new user education', 'Loading spinner', 'Loading spinner')}),children:m?(0,N.jsx)(ej,{experience:n}):(0,N.jsx)(eS,{experience:n})})});case 500681:return(0,N.jsx)(c.Z,{name:"SafeSuspense_HomePage_ContactUpdate",children:(0,N.jsx)(ew,{fallback:(0,N.jsx)(P.Z,{accessibilityLabel:this.props.i18n._('Loading experience', 'loading experience spinner', 'loading experience spinner')})})})}let U=d&&e("mweb_hf_core_actions_header").anyEnabled&&l,F=()=>{this.setState({shouldDismissCoreActionsHeader:!0})};return(0,N.jsx)(C.Z,{viewParameter:92,viewType:1,children:(0,N.jsx)(Z.Z,{view:1,viewParameter:92,children:(0,N.jsxs)(g.default,{dataLayoutShiftBoundaryId:"AuthHomePageContainer",hasFixedHeader:!0,children:[R&&(0,N.jsx)(s.xu,{marginTop:4,children:(0,N.jsx)(ev,{})}),(0,N.jsx)(D.Z,{text:a._('Home', 'HomePage.HiddenAccessibilityHeader', 'Accessibility h1 at home page')}),!!S?.length&&(0,N.jsx)(v.default,{hideOnScroll:d,noPadding:!0,overrideTop:0,children:(0,N.jsx)(s.xu,{paddingY:1,children:(0,N.jsx)(J,{currentTabIndex:k,tabBoards:S||[]})})}),_&&(0,N.jsx)(s.xu,{marginEnd:-4,marginStart:-4,paddingY:2,children:(0,N.jsx)(X.Z,{storyId:_.id||"",children:e=>(0,N.jsx)(eo,{slotIndex:0,story:e,viewParameter:92,viewType:1},_.id)})}),k!==L.e&&B&&k<=(S?.length??0)&&(0,N.jsx)(es,{boardId:B})||(0,N.jsxs)(i.Fragment,{children:[(0,N.jsx)(u.s$,{experience:n}),(0,N.jsx)(u._f,{experience:n,placementId:40001}),(0,N.jsx)(u.b9,{placementId:40001}),(0,N.jsx)(u.nj,{experience:n,placementId:40001}),(0,N.jsx)(p.Z,{placementId:n?.placement_id}),(0,N.jsx)(f.Z,{placementId:1000544}),(0,N.jsx)(h.Z,{placementId:1000558}),(0,N.jsx)(u.a3,{eligibleIds:[500726,500866,500735,500833,501182,501275,501385,501358,501908,501909,503291],experience:n,children:(0,N.jsx)(j.Z,{children:(0,N.jsx)(ef,{experience:n})})}),n&&(0,N.jsx)(u.a3,{eligibleIds:[507483],experience:n,children:({dismiss:e,experience:{display_data:t}})=>{let r=!("is_blocking"in t)||t.is_blocking;return(0,N.jsx)(el,{dismiss:e,isBlockingModal:r})}}),n&&(0,N.jsx)(u.a3,{eligibleIds:[507661],experience:n,children:({dismiss:e,experience:{display_data:t}})=>(0,N.jsx)(ec,{displayData:t,onDismiss:e})}),n&&(0,N.jsx)(u.a3,{eligibleIds:[507924],experience:n,children:({complete:e,dismiss:t})=>(0,N.jsx)(eu,{onComplete:e,onDismiss:t})}),n&&(0,N.jsx)(u.a3,{eligibleIds:[508387],experience:n,placementId:40001,children:({complete:e,dismiss:t,experience:r})=>(0,N.jsx)(ep,{complete:e,dismiss:t,experience:r})}),n&&(0,N.jsx)(u.a3,{eligibleIds:[505326],experience:n,children:({complete:e,dismiss:t})=>(0,N.jsx)(i.Suspense,{children:(0,N.jsx)(e_,{complete:e,dismiss:t})})}),n&&(0,N.jsx)(u.a3,{eligibleIds:[505801],experience:n,children:({complete:e})=>(0,N.jsx)(i.Suspense,{children:(0,N.jsx)(ex,{complete:e})})}),b?.display_data?.story&&b.display_data.showUpdatedLandingPageStory&&(0,N.jsx)(ed,{isMoreIdeasTabsVisible:!!S?.length,newUserWelcomeStoryExperience:b}),(0,N.jsxs)(s.xu,{marginTop:2*(!S?.length&&!_),children:[!O&&U&&(0,N.jsx)(ei,{onDismiss:F,username:r||""}),(0,N.jsx)(ey,{webMobileHomeFeedTakoverExperience:y})]})]}),T&&(0,N.jsx)(j.Z,{children:(0,N.jsx)(s.xu,{"data-test-id":"unlink-expired-token",children:(0,N.jsx)(em,{onDismiss:()=>{o("/",{replace:!0}),this.setState({showUnlinkTokenExpiredModal:!1})}})})}),H&&(0,N.jsx)(j.Z,{children:(0,N.jsx)(eh,{isPartner:m,onDismiss:()=>{o("/",{replace:!0}),this.setState({showDeleteAccountSurveyModal:!1})},userId:t,username:r})}),A&&(0,N.jsx)(c.Z,{name:"YearInPreviewConfirmPublishModal",children:(0,N.jsx)(eI,{onModalDismiss:()=>{this.setState({showYipModal:!1})}})}),this.renderOptInInterestPicker(),k===L.e&&n&&(0,N.jsx)(u.a3,{eligibleIds:[508418],experience:n,children:()=>I?(0,N.jsx)(Q,{}):(0,N.jsx)(ea,{hasTabBoards:(S?.length??0)>0})})]})})})}}let eE=[];function eT(){(0,i.useEffect)(()=>{(0,n.Z)("HomePage","/app/www/pages/duplo/HomePage.tsx")},[]);let e=(0,_.Z)(),t=(0,o.I0)(),r=(0,x.Z)(),{showToast:s}=(0,k.dI)(),d=(0,a.s0)(),l=(0,a.TH)(),{checkExperiment:c}=(0,y.Z)(),{shouldRefreshHomefeed:p,clearRefreshFlag:h}=(0,q._T)(),{experience:f}=(0,u.Ow)(40001),{experience:m}=(0,u.Ow)(1000115),{experience:v}=(0,u.Ow)(1000411),g=(0,o.v9)(({feeds:e})=>e.homefeed),w=(0,o.v9)(({homefeedTabUI:e})=>e.activeTabBoardId),j=(0,o.v9)(({homefeedTabUI:e})=>e.activeTabIndex),{isAuth:P,isLimitedLogin:I}=r,Z=r.isAuth?r.id:void 0,E=r.isAuth?r.username:void 0,C=!!r.isAuth&&r.isPartner,H=(0,T.HG)(),A=Array.isArray(g)?g:[],O=!H&&A[0]&&"story"===A[0].type?A[0]:null,D=(0,o.v9)(({stories:e})=>O?e[O.id]:null),L=D&&D.story_type&&D.story_type.startsWith("boards_more_ideas_feed_upsell")?D:null,R=A.find(({type:e})=>"home_feed_tabs"===e)?.tabs,{data:z}=(0,S.Z)(P&&c("mweb_hf_core_actions_header",{dangerouslySkipActivation:!0}).anyEnabled?{name:"UserResource",options:{user_id:r.id,field_set_key:"core_actions_header"}}:null),B=(0,T.ml)();(0,b.Z)(l,s,e);let U={checkExperiment:c,currentUserId:Z,currentUsername:E,dispatchViewedSharedPins:e=>t({type:"SET_VIEWED_SHARED_PINS",payload:{pins:e}}),everythingFeedExperience:f,navigate:d,i18n:e,isAuthenticated:P,isEligibleForCoreActionsHeader:z?.is_eligible_for_core_actions_header,isLimitedLogin:I,isMobile:B,isPartner:C,location:l,moreIdeasStory:L,newUserWelcomeStoryExperience:v,selectedTabBoardId:w,selectedTabIndex:j,showToast:s,tabBoards:R??eE,webMobileHomeFeedTakoverExperience:m,shouldRefreshHomefeed:p,clearRefreshFlag:h};return(0,N.jsx)(ek,{...U})}},751534:function(e,t,r){r.d(t,{EP:()=>d,HH:()=>s,WV:()=>o,om:()=>a,xJ:()=>i});var n=r(647908);let i="homefeed",o="feed_home",a="UserHomefeedResource",s={field_set_key:"mobile_grid_item",prepend:!1},d=(0,n.Z)(s)},454908:function(e,t,r){r.d(t,{r:()=>n});let n=(e,t)=>({type:"SET_ACTIVE_HOMEFEED_TAB",payload:{boardId:e,index:t}})},680717:function(e,t,r){r.d(t,{KF:()=>c,ZN:()=>s,fv:()=>l,kE:()=>p,yA:()=>d});var n=r(27399),i=r(47755),o=r(826681);function a(e,t,r,i){return n.Z.create("UserFollowResource",{user_id:e,invite_code:i||void 0,aux_data:t?{pin_id:t}:void 0,client_tracking_params:r})}function s(e,t=null,r,n){return i=>{a(e,t,r,n).callCreate().catch(()=>i((0,o.P_)(e,!1))),i((0,o.P_)(e,!0))}}function d(e,t=null,r,n){return async i=>{i((0,o.P_)(e,!0)),await a(e,t,r,n).callCreate().catch(t=>{throw i((0,o.P_)(e,!1)),t})}}function l(e,t=null,r){return n=>{a(e,t,r).callDelete().catch(()=>n((0,o.P_)(e,!0))),n((0,o.P_)(e,!1))}}function c(e,t=null,r){return async n=>{n((0,o.P_)(e,!1)),await a(e,t,r).callDelete().catch(t=>{throw n((0,o.P_)(e,!0)),t})}}let u=(e,t)=>({type:"USER_BULK_FOLLOW",payload:{ids:e,value:t}}),p=e=>t=>{e.length>0&&((0,i.Z)({url:"/v3/users/follow/",method:"PUT",data:{followee_ids:e}}).catch(()=>t(u(e,!1))),t(u(e,!0)))}},826681:function(e,t,r){r.d(t,{Ge:()=>l,JS:()=>o,P_:()=>a,Q_:()=>p,b8:()=>h,cg:()=>s,h2:()=>c,h6:()=>u});var n=r(47755),i=r(748025);function o(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}let a=(e,t)=>({type:"USER_FOLLOW",payload:{id:e,value:t}}),s=(e,t)=>({type:"USER_FOLLOWING_COUNT",payload:{id:e,following:t}}),d=(e,t)=>({type:"USER_BLOCK",payload:{id:e,value:t}}),l=({id:e,orbacSubjectId:t,blockSource:r,blockContext:i,logContextEvent:o})=>async a=>{a(d(e,!0));let s=await (0,n.Z)({url:"/v3/users/{blocked_user}/block/",urlParams:{blocked_user:e},method:"PUT",data:{orbac_subject_id:t,block_source:r,block_context:i}}).catch(()=>a(d(e,!1)));return o({event_type:54,object_id_str:e}),s},c=(e,t)=>async r=>{r(d(e,!1));let i=await (0,n.Z)({url:"/v3/users/{blocked_user}/block/",urlParams:{blocked_user:e},method:"DELETE"}).catch(()=>r(d(e,!0)));return t({event_type:55,object_id_str:e}),i};function u(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}let p=(e,t)=>()=>(0,n.Z)({url:"/v3/users/state/{state}/",urlParams:{state:e},method:"PUT",data:{value:t}}),h=(e,t,r)=>(o,a)=>{(0,n.Z)({url:"/v3/users/me/",method:"POST"}).then(()=>{r({event_type:48,object_id_str:a().session.userId}),e(),(0,i.Z)()},t)}},297621:function(e,t,r){r.d(t,{Z:()=>i});var n=r(581722);function i({children:e,storyId:t}){let r=(0,n.v9)(({stories:e})=>e[t]);return r&&e(r)}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/58430-9b93ec423d683f00.mjs.map